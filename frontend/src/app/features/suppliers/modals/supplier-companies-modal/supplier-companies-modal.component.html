@if (open()) {
  <div class="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
    <div class="bg-white w-full max-w-lg rounded-lg shadow p-6">
      
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-lg font-semibold">
          {{ supplier()?.name }} – {{cpfCnpjLabel()}} {{ supplier()?.cpfCnpj }}
        </h2>
        <button
          class="text-gray-500 hover:text-black cursor-pointer"
          (click)="close.emit()">
          ✕
        </button>
      </div>

      @if (loading()) {
        <p class="text-center py-4">Loading...</p>
      } @else if (companies().length === 0) {
        <p class="text-sm text-gray-500">
          This supplier is not associated with any company.
        </p>
      } @else {
        <ul class="space-y-2 mb-4">
          @for (company of companies(); track company.id) {
            <li class="border rounded p-3">
                <p class="font-medium">{{ company.name }}</p>
                <p class="text-xs text-gray-500">
                    CNPJ: {{ company.cnpj }} • CEP: {{ company.cep }} • UF: {{ company.uf }}
                </p>
            </li>
          }
        </ul>

        @if (totalPages() > 1) {
          <div class="flex justify-between items-center text-sm pt-4 border-t">
            <button
              class="px-3 py-1 border rounded disabled:opacity-40 cursor-pointer disabled:cursor-not-allowed"
              (click)="previousPage()"
              [disabled]="page() === 0">
              ← Previous
            </button>

            <span class="text-gray-600">
              Page {{ page() + 1 }} of {{ totalPages() }}
            </span>

            <button
              class="px-3 py-1 border rounded disabled:opacity-40 cursor-pointer"
              (click)="nextPage()"
              [disabled]="page() + 1 >= totalPages()">
              Next →
            </button>
          </div>
        }
      }
    </div>
  </div>
}